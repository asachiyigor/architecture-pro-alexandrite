---
up:
  - "[[Task4]]"
---
# ĞÑ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ½Ğ¾Ğµ Ñ€ĞµÑˆĞµĞ½Ğ¸Ğµ Ğ¿Ğ¾ Ğ²Ğ½ĞµĞ´Ñ€ĞµĞ½Ğ¸Ñ ÑĞ¸ÑÑ‚ĞµĞ¼Ñ‹ Ğ»Ğ¾Ğ³Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ Ğ² "ĞĞ»ĞµĞºÑĞ°Ğ½Ğ´Ñ€Ğ¸Ñ‚"

## 1. ĞĞ½Ğ°Ğ»Ğ¸Ğ· ÑĞ¸ÑÑ‚ĞµĞ¼Ñ‹ Ğ¸ C4 Ğ´Ğ¸Ğ°Ğ³Ñ€Ğ°Ğ¼Ğ¼Ñ‹

### 1.1 Ğ¢ĞµĞºÑƒÑ‰Ğ°Ñ Ğ°Ñ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ°

**ĞšĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚Ñ‹ ÑĞ¸ÑÑ‚ĞµĞ¼Ñ‹:**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         Context Level                           â”‚
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
â”‚  â”‚Customerâ”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚   Alexandrite System         â”‚           â”‚
â”‚  â”‚        â”‚          â”‚                              â”‚           â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚  - E-commerce (Shop)         â”‚           â”‚
â”‚                      â”‚  - CRM                       â”‚           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚  - MES (Manufacturing)       â”‚           â”‚
â”‚  â”‚Operatorâ”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                              â”‚           â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      Container Level                            â”‚
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚   Shop       â”‚       â”‚     CRM      â”‚      â”‚     MES      â”‚  â”‚
â”‚  â”‚              â”‚       â”‚              â”‚      â”‚              â”‚  â”‚
â”‚  â”‚ Vue.js       â”‚â—„â”€â”€â”€â”€â”€â–ºâ”‚ SpringBoot   â”‚â—„â”€â”€â”€â”€â–ºâ”‚   React      â”‚  â”‚
â”‚  â”‚ SpringBoot   â”‚       â”‚ PostgreSQL   â”‚      â”‚   C# .NET    â”‚  â”‚
â”‚  â”‚ PostgreSQL   â”‚       â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚   PostgreSQL â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚              â”‚   S3         â”‚  â”‚
â”‚         â”‚                      â”‚              â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚         â”‚                      â”‚                     â”‚          â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â”‚                    â–¼                                            â”‚
â”‚            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                    â”‚
â”‚            â”‚   RabbitMQ    â”‚                                    â”‚
â”‚            â”‚               â”‚                                    â”‚
â”‚            â”‚ - orders      â”‚                                    â”‚
â”‚            â”‚ - events      â”‚                                    â”‚
â”‚            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 1.2 ĞšÑ€Ğ¸Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸Ğµ Ñ‚Ğ¾Ñ‡ĞºĞ¸ Ğ´Ğ»Ñ Ğ»Ğ¾Ğ³Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ

**ĞŸÑ€Ğ¸Ğ¾Ñ€Ğ¸Ñ‚ĞµÑ‚ ÑĞ¸ÑÑ‚ĞµĞ¼ Ğ´Ğ»Ñ Ğ»Ğ¾Ğ³Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ:**

1. **ĞšĞ Ğ˜Ğ¢Ğ˜Ğ§Ğ•Ğ¡ĞšĞ˜Ğ™ - RabbitMQ Ğ¸Ğ½Ñ‚ĞµĞ³Ñ€Ğ°Ñ†Ğ¸Ñ**
   - ĞŸÑ€Ğ¾Ğ±Ğ»ĞµĞ¼Ğ°: Ğ¿Ğ¾Ñ‚ĞµÑ€Ñ Ğ·Ğ°ĞºĞ°Ğ·Ğ¾Ğ² Ñ‡ĞµÑ€ĞµĞ· message broker
   - ĞĞµĞ¾Ğ±Ñ…Ğ¾Ğ´Ğ¸Ğ¼Ğ¾: Ğ»Ğ¾Ğ³Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ ĞºĞ°Ğ¶Ğ´Ğ¾Ğ³Ğ¾ ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ñ (publish/consume/ack/nack)

2. **Ğ’Ğ«Ğ¡ĞĞšĞ˜Ğ™ - CRM / Order Processing**
   - ĞŸÑ€Ğ¾Ğ±Ğ»ĞµĞ¼Ğ°: Ğ´Ğ¾Ğ»Ğ³Ğ¸Ğ¹ Ñ€Ğ°ÑÑ‡ĞµÑ‚ ÑÑ‚Ğ¾Ğ¸Ğ¼Ğ¾ÑÑ‚Ğ¸ (2-30 Ğ¼Ğ¸Ğ½ÑƒÑ‚)
   - ĞĞµĞ¾Ğ±Ñ…Ğ¾Ğ´Ğ¸Ğ¼Ğ¾: Ğ´ĞµÑ‚Ğ°Ğ»ÑŒĞ½Ğ¾Ğµ Ğ»Ğ¾Ğ³Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ ÑÑ‚Ğ°Ğ¿Ğ¾Ğ² Ñ€Ğ°ÑÑ‡ĞµÑ‚Ğ°

3. **Ğ’Ğ«Ğ¡ĞĞšĞ˜Ğ™ - MES Dashboard**
   - ĞŸÑ€Ğ¾Ğ±Ğ»ĞµĞ¼Ğ°: Ğ¼ĞµĞ´Ğ»ĞµĞ½Ğ½Ğ°Ñ Ğ·Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞ°
   - ĞĞµĞ¾Ğ±Ñ…Ğ¾Ğ´Ğ¸Ğ¼Ğ¾: Ğ»Ğ¾Ğ³Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ Ğ²Ñ€ĞµĞ¼ĞµĞ½Ğ¸ Ğ²Ñ‹Ğ¿Ğ¾Ğ»Ğ½ĞµĞ½Ğ¸Ñ Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑĞ¾Ğ²

4. **Ğ¡Ğ Ğ•Ğ”ĞĞ˜Ğ™ - Shop API**
   - Ğ¢Ğ¾Ñ‡ĞºĞ° Ğ²Ñ…Ğ¾Ğ´Ğ° Ğ´Ğ»Ñ Ğ·Ğ°ĞºĞ°Ğ·Ğ¾Ğ²
   - ĞĞµĞ¾Ğ±Ñ…Ğ¾Ğ´Ğ¸Ğ¼Ğ¾: Ğ»Ğ¾Ğ³Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒÑĞºĞ¸Ñ… Ğ´ĞµĞ¹ÑÑ‚Ğ²Ğ¸Ğ¹

5. **Ğ¡Ğ Ğ•Ğ”ĞĞ˜Ğ™ - Ğ˜Ğ½Ñ‚ĞµĞ³Ñ€Ğ°Ñ†Ğ¸Ğ¸ Ñ Ğ²Ğ½ĞµÑˆĞ½Ğ¸Ğ¼Ğ¸ ÑĞ¸ÑÑ‚ĞµĞ¼Ğ°Ğ¼Ğ¸**
   - PostgreSQL, S3
   - ĞĞµĞ¾Ğ±Ñ…Ğ¾Ğ´Ğ¸Ğ¼Ğ¾: Ğ»Ğ¾Ğ³Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ Ğ¾ÑˆĞ¸Ğ±Ğ¾Ğº Ğ¸ Ğ¼ĞµĞ´Ğ»ĞµĞ½Ğ½Ñ‹Ñ… Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑĞ¾Ğ²

---

## 2. Ğ¡Ğ¿Ğ¸ÑĞ¾Ğº Ğ½ĞµĞ¾Ğ±Ñ…Ğ¾Ğ´Ğ¸Ğ¼Ñ‹Ñ… Ğ»Ğ¾Ğ³Ğ¾Ğ² Ñ ÑƒÑ€Ğ¾Ğ²Ğ½ĞµĞ¼ INFO

### 2.1 Shop Service (Vue.js + SpringBoot)

```java
// Order Creation
INFO  [2025-11-14 10:23:45.123] [user-service] [user_id=12345, session_id=abc-123]
  OrderCreated: order_id=ORD-2025-001, customer_id=12345, items_count=3, total_amount=15000.00

// Order Submitted to RabbitMQ
INFO  [2025-11-14 10:23:45.456] [rabbitmq-publisher] [correlation_id=abc-123, trace_id=xyz-789]
  MessagePublished: exchange=orders.exchange, routing_key=orders.created,
  order_id=ORD-2025-001, message_id=msg-456

// User Actions
INFO  [2025-11-14 10:20:00.000] [authentication] [ip=192.168.1.10]
  UserLogin: user_id=12345, username=ivan.petrov@client.ru, method=oauth2

INFO  [2025-11-14 10:30:00.000] [catalog] [user_id=12345]
  ProductViewed: product_id=PROD-123, category=rings, price=5000.00
```

### 2.2 CRM Service (SpringBoot)

```java
// Message Consumption from RabbitMQ
INFO  [2025-11-14 10:23:46.000] [rabbitmq-consumer] [correlation_id=abc-123, trace_id=xyz-789]
  MessageReceived: queue=orders.created, order_id=ORD-2025-001,
  message_id=msg-456, delivery_tag=1

// Order Validation
INFO  [2025-11-14 10:23:46.200] [order-validator] [order_id=ORD-2025-001, trace_id=xyz-789]
  OrderValidationStarted: customer_id=12345, items_count=3

INFO  [2025-11-14 10:23:47.000] [order-validator] [order_id=ORD-2025-001, trace_id=xyz-789]
  OrderValidationCompleted: status=VALID, duration_ms=800

// Cost Calculation (Ğ´ĞµÑ‚Ğ°Ğ»ÑŒĞ½Ğ¾Ğµ Ğ»Ğ¾Ğ³Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ Ğ´Ğ»Ñ Ğ´Ğ¸Ğ°Ğ³Ğ½Ğ¾ÑÑ‚Ğ¸ĞºĞ¸ Ğ¼ĞµĞ´Ğ»ĞµĞ½Ğ½Ğ¾Ğ³Ğ¾ Ñ€Ğ°ÑÑ‡ĞµÑ‚Ğ°)
INFO  [2025-11-14 10:23:47.100] [cost-calculator] [order_id=ORD-2025-001, trace_id=xyz-789]
  CostCalculationStarted: items_count=3, calculation_method=standard

INFO  [2025-11-14 10:23:47.200] [cost-calculator] [order_id=ORD-2025-001, trace_id=xyz-789]
  MaterialCostCalculated: item_id=ITEM-1, material=gold_585,
  weight_g=5.2, cost_per_g=3500, total_cost=18200.00, duration_ms=50

INFO  [2025-11-14 10:23:47.300] [cost-calculator] [order_id=ORD-2025-001, trace_id=xyz-789]
  LaborCostCalculated: item_id=ITEM-1, operation=casting,
  duration_hours=2.5, cost_per_hour=800, total_cost=2000.00, duration_ms=30

INFO  [2025-11-14 10:24:15.500] [cost-calculator] [order_id=ORD-2025-001, trace_id=xyz-789]
  CostCalculationCompleted: total_cost=25000.00, items_calculated=3,
  duration_ms=28400 // <- ĞĞ½Ğ¾Ğ¼Ğ°Ğ»ÑŒĞ½Ğ¾ Ğ´Ğ¾Ğ»Ğ³Ğ¾!

// Message Acknowledgment
INFO  [2025-11-14 10:24:15.600] [rabbitmq-consumer] [correlation_id=abc-123, trace_id=xyz-789]
  MessageAcknowledged: queue=orders.created, message_id=msg-456,
  delivery_tag=1, processing_time_ms=29600
```

### 2.3 MES Service (React + C# .NET)

```csharp
// Dashboard Load
INFO  [2025-11-14 10:25:00.000] [dashboard-controller] [user_id=operator-001, trace_id=dash-123]
  DashboardLoadStarted: view=production-overview, filters=today

INFO  [2025-11-14 10:25:01.200] [dashboard-controller] [trace_id=dash-123]
  DatabaseQueryExecuted: query=get_active_orders, rows_returned=150, duration_ms=1200

INFO  [2025-11-14 10:25:03.500] [dashboard-controller] [trace_id=dash-123]
  S3FilesLoaded: bucket=mes-drawings, files_count=45, total_size_mb=23.5, duration_ms=2300

INFO  [2025-11-14 10:25:04.000] [dashboard-controller] [trace_id=dash-123]
  DashboardLoadCompleted: total_duration_ms=4000, orders_displayed=150

// Order Status Change
INFO  [2025-11-14 11:00:00.000] [order-status] [order_id=ORD-2025-001, operator_id=operator-001]
  OrderStatusChanged: previous_status=VALIDATED, new_status=IN_PRODUCTION,
  production_line=LINE-3

// File Upload to S3
INFO  [2025-11-14 11:05:00.000] [file-service] [order_id=ORD-2025-001, operator_id=operator-001]
  FileUploaded: file_name=drawing-v2.pdf, file_size_mb=2.3,
  s3_bucket=mes-drawings, s3_key=orders/2025/ORD-2025-001/drawing-v2.pdf, duration_ms=450
```

### 2.4 RabbitMQ (Broker-level logging)

```bash
# RabbitMQ management plugin logs
INFO  [2025-11-14 10:23:45.456] [channel.info]
  Message published: exchange=orders.exchange, routing_key=orders.created,
  message_id=msg-456, persistent=true, size_bytes=1024

INFO  [2025-11-14 10:23:46.000] [channel.info]
  Message delivered: queue=orders.created, consumer_tag=ctag-crm-001,
  delivery_tag=1, redelivered=false

INFO  [2025-11-14 10:24:15.600] [channel.info]
  Message acknowledged: queue=orders.created, delivery_tag=1, multiple=false
```

---

## 3. Ğ˜ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ Ğ´Ñ€ÑƒĞ³Ğ¸Ñ… ÑƒÑ€Ğ¾Ğ²Ğ½ĞµĞ¹ Ğ»Ğ¾Ğ³Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ

### 3.1 DEBUG

**ĞĞ°Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ğµ:** Ğ´ĞµÑ‚Ğ°Ğ»ÑŒĞ½Ğ°Ñ Ğ¾Ñ‚Ğ»Ğ°Ğ´Ğ¾Ñ‡Ğ½Ğ°Ñ Ğ¸Ğ½Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ†Ğ¸Ñ, Ğ½Ğµ Ğ²ĞºĞ»ÑÑ‡Ğ°ĞµÑ‚ÑÑ Ğ² production Ğ¿Ğ¾ ÑƒĞ¼Ğ¾Ğ»Ñ‡Ğ°Ğ½Ğ¸Ñ.

```java
// ĞÑ‚Ğ»Ğ°Ğ´ĞºĞ° Ğ°Ğ»Ğ³Ğ¾Ñ€Ğ¸Ñ‚Ğ¼Ğ° Ñ€Ğ°ÑÑ‡ĞµÑ‚Ğ° ÑÑ‚Ğ¾Ğ¸Ğ¼Ğ¾ÑÑ‚Ğ¸
DEBUG [2025-11-14 10:23:47.250] [cost-calculator] [order_id=ORD-2025-001]
  MaterialPriceQuery: material=gold_585, supplier_id=SUP-001,
  query_result={price_per_g: 3500, valid_until: 2025-11-30}

DEBUG [2025-11-14 10:23:47.280] [cost-calculator] [order_id=ORD-2025-001]
  DiscountCalculation: base_cost=20000, customer_tier=GOLD,
  discount_percent=10, final_cost=18000
```

**ĞšĞ¾Ğ³Ğ´Ğ° Ğ²ĞºĞ»ÑÑ‡Ğ°Ñ‚ÑŒ:**
- ĞŸÑ€Ğ¸ Ñ€Ğ°ÑÑĞ»ĞµĞ´Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğ¸ ĞºĞ¾Ğ½ĞºÑ€ĞµÑ‚Ğ½Ğ¾Ğ³Ğ¾ Ğ¸Ğ½Ñ†Ğ¸Ğ´ĞµĞ½Ñ‚Ğ° (Ğ´Ğ¸Ğ½Ğ°Ğ¼Ğ¸Ñ‡ĞµÑĞºĞ¾Ğµ Ğ²ĞºĞ»ÑÑ‡ĞµĞ½Ğ¸Ğµ Ğ¿Ğ¾ trace_id)
- Ğ’ staging/pre-production Ğ¾ĞºÑ€ÑƒĞ¶ĞµĞ½Ğ¸Ğ¸

### 3.2 WARN

**ĞĞ°Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ğµ:** Ğ¿Ğ¾Ñ‚ĞµĞ½Ñ†Ğ¸Ğ°Ğ»ÑŒĞ½Ñ‹Ğµ Ğ¿Ñ€Ğ¾Ğ±Ğ»ĞµĞ¼Ñ‹, Ğ½Ğµ Ğ¿Ñ€Ğ¸Ğ²Ğ¾Ğ´ÑÑ‰Ğ¸Ğµ Ğº ÑĞ±Ğ¾Ñ, Ğ½Ğ¾ Ñ‚Ñ€ĞµĞ±ÑƒÑÑ‰Ğ¸Ğµ Ğ²Ğ½Ğ¸Ğ¼Ğ°Ğ½Ğ¸Ñ.

```java
// ĞœĞµĞ´Ğ»ĞµĞ½Ğ½Ñ‹Ğµ Ğ¾Ğ¿ĞµÑ€Ğ°Ñ†Ğ¸Ğ¸
WARN  [2025-11-14 10:24:15.500] [cost-calculator] [order_id=ORD-2025-001]
  SlowCalculation: duration_ms=28400, threshold_ms=5000,
  reason=Complex_configuration, items_count=3

// Retry Ğ¼ĞµÑ…Ğ°Ğ½Ğ¸Ğ·Ğ¼Ñ‹
WARN  [2025-11-14 10:25:00.000] [rabbitmq-publisher] [order_id=ORD-2025-002]
  MessagePublishRetry: attempt=2, max_attempts=3, error=ConnectionTimeout,
  next_retry_in_ms=1000

// ĞŸÑ€Ğ¸Ğ±Ğ»Ğ¸Ğ¶ĞµĞ½Ğ¸Ğµ Ğº Ğ»Ğ¸Ğ¼Ğ¸Ñ‚Ğ°Ğ¼
WARN  [2025-11-14 10:30:00.000] [rabbitmq-consumer] [queue=orders.created]
  QueueBacklog: messages_count=5000, threshold=3000, consumers_count=2,
  avg_processing_time_ms=500

// Deprecated API usage
WARN  [2025-11-14 10:35:00.000] [api-controller] [user_id=12345]
  DeprecatedAPIUsed: endpoint=/api/v1/orders, deprecated_since=2025-01-01,
  replacement=/api/v2/orders, sunset_date=2025-12-31
```

### 3.3 ERROR

**ĞĞ°Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ğµ:** Ğ¾ÑˆĞ¸Ğ±ĞºĞ¸, Ñ‚Ñ€ĞµĞ±ÑƒÑÑ‰Ğ¸Ğµ Ğ½ĞµĞ¼ĞµĞ´Ğ»ĞµĞ½Ğ½Ğ¾Ğ³Ğ¾ Ğ²Ğ½Ğ¸Ğ¼Ğ°Ğ½Ğ¸Ñ, Ğ½Ğ¾ Ğ½Ğµ Ğ¿Ñ€Ğ¸Ğ²Ğ¾Ğ´ÑÑ‰Ğ¸Ğµ Ğº Ğ¾ÑÑ‚Ğ°Ğ½Ğ¾Ğ²ĞºĞµ ÑĞµÑ€Ğ²Ğ¸ÑĞ°.

```java
// Message Nack (ĞºÑ€Ğ¸Ñ‚Ğ¸Ñ‡Ğ½Ğ¾ Ğ´Ğ»Ñ Ñ€Ğ°ÑÑĞ»ĞµĞ´Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ Ğ¿Ğ¾Ñ‚ĞµÑ€Ğ¸ Ğ·Ğ°ĞºĞ°Ğ·Ğ¾Ğ²)
ERROR [2025-11-14 10:25:00.000] [rabbitmq-consumer] [correlation_id=abc-456, trace_id=xyz-999]
  MessageNacked: queue=orders.created, message_id=msg-789,
  delivery_tag=5, requeue=true,
  error=InvalidOrderFormat, error_details="Missing required field: customer_id"

// Database constraint violation
ERROR [2025-11-14 10:26:00.000] [order-repository] [order_id=ORD-2025-003]
  DatabaseError: operation=INSERT, table=orders,
  error=UniqueConstraintViolation, constraint=orders_order_number_unique,
  sql_state=23505

// External service failure
ERROR [2025-11-14 10:27:00.000] [payment-gateway] [order_id=ORD-2025-004]
  PaymentProcessingFailed: gateway=stripe, transaction_id=TXN-123,
  error_code=card_declined, error_message="Insufficient funds",
  retry_possible=false

// S3 upload failure
ERROR [2025-11-14 10:28:00.000] [file-service] [order_id=ORD-2025-005]
  FileUploadFailed: file_name=drawing.pdf, s3_bucket=mes-drawings,
  error=AccessDenied, aws_request_id=REQ-ABC-123
```

### 3.4 FATAL/CRITICAL

**ĞĞ°Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ğµ:** ĞºÑ€Ğ¸Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸Ğµ Ğ¾ÑˆĞ¸Ğ±ĞºĞ¸, Ğ¿Ñ€Ğ¸Ğ²Ğ¾Ğ´ÑÑ‰Ğ¸Ğµ Ğº Ğ½ĞµÑ€Ğ°Ğ±Ğ¾Ñ‚Ğ¾ÑĞ¿Ğ¾ÑĞ¾Ğ±Ğ½Ğ¾ÑÑ‚Ğ¸ ÑĞµÑ€Ğ²Ğ¸ÑĞ°.

```java
// Database connection pool exhausted
FATAL [2025-11-14 10:30:00.000] [database-pool]
  ConnectionPoolExhausted: pool_size=20, active_connections=20,
  pending_requests=50, action=ServiceShutdown

// RabbitMQ connection lost
FATAL [2025-11-14 10:31:00.000] [rabbitmq-connection]
  BrokerConnectionLost: host=rabbitmq.alexandrite.local, port=5672,
  last_heartbeat=2025-11-14T10:29:00Z, reconnect_attempts=10,
  status=Giving_up

// Out of Memory
FATAL [2025-11-14 10:32:00.000] [jvm]
  OutOfMemoryError: heap_used_mb=8192, heap_max_mb=8192,
  gc_time_percent=98, action=Heap_dump_created,
  dump_path=/var/logs/heap-dump-2025-11-14.hprof
```

---

## 4. ĞœĞ¾Ñ‚Ğ¸Ğ²Ğ°Ñ†Ğ¸Ñ Ğ²Ğ½ĞµĞ´Ñ€ĞµĞ½Ğ¸Ñ Ğ»Ğ¾Ğ³Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ

### 4.1 Ğ¢ĞµÑ…Ğ½Ğ¸Ñ‡ĞµÑĞºĞ¸Ğµ Ğ¼ĞµÑ‚Ñ€Ğ¸ĞºĞ¸

1. **Time to Detect (TTD)** - Ğ²Ñ€ĞµĞ¼Ñ Ğ¾Ğ±Ğ½Ğ°Ñ€ÑƒĞ¶ĞµĞ½Ğ¸Ñ Ğ¿Ñ€Ğ¾Ğ±Ğ»ĞµĞ¼Ñ‹
   - Ğ¢ĞµĞºÑƒÑ‰ĞµĞµ ÑĞ¾ÑÑ‚Ğ¾ÑĞ½Ğ¸Ğµ: Ğ¿Ñ€Ğ¾Ğ±Ğ»ĞµĞ¼Ñ‹ Ğ¾Ğ±Ğ½Ğ°Ñ€ÑƒĞ¶Ğ¸Ğ²Ğ°ÑÑ‚ÑÑ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑĞ¼Ğ¸ (Ñ‡Ğ°ÑÑ‹/Ğ´Ğ½Ğ¸)
   - Ğ¦ĞµĞ»ĞµĞ²Ğ¾Ğµ Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ğµ: < 1 Ğ¼Ğ¸Ğ½ÑƒÑ‚Ğ° (Ğ°Ğ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸Ğ¹ Ğ°Ğ»ĞµÑ€Ñ‚)

2. **Time to Isolate (TTI)** - Ğ²Ñ€ĞµĞ¼Ñ Ğ»Ğ¾ĞºĞ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ğ¸ Ğ¿Ñ€Ğ¾Ğ±Ğ»ĞµĞ¼Ñ‹
   - Ğ¢ĞµĞºÑƒÑ‰ĞµĞµ ÑĞ¾ÑÑ‚Ğ¾ÑĞ½Ğ¸Ğµ: 1-2 Ñ‡Ğ°ÑĞ° Ñ€ÑƒÑ‡Ğ½Ğ¾Ğ³Ğ¾ Ğ¿Ğ¾Ğ¸ÑĞºĞ° Ğ¿Ğ¾ Ñ€Ğ°Ğ·Ğ½Ñ‹Ğ¼ ÑĞ¸ÑÑ‚ĞµĞ¼Ğ°Ğ¼
   - Ğ¦ĞµĞ»ĞµĞ²Ğ¾Ğµ Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ğµ: < 5 Ğ¼Ğ¸Ğ½ÑƒÑ‚ (Ñ†ĞµĞ½Ñ‚Ñ€Ğ°Ğ»Ğ¸Ğ·Ğ¾Ğ²Ğ°Ğ½Ğ½Ñ‹Ğ¹ Ğ¿Ğ¾Ğ¸ÑĞº Ğ² ELK)

3. **Log Search Performance**
   - Ğ¢Ñ€ĞµĞ±Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ: Ğ¿Ğ¾Ğ¸ÑĞº Ğ¿Ğ¾ 1TB Ğ»Ğ¾Ğ³Ğ¾Ğ² Ğ·Ğ° < 3 ÑĞµĞºÑƒĞ½Ğ´Ñ‹
   - ĞœĞµÑ‚Ñ€Ğ¸ĞºĞ°: p95 latency Ğ¿Ğ¾Ğ¸ÑĞºĞ¾Ğ²Ñ‹Ñ… Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑĞ¾Ğ² < 3s

4. **Error Rate Detection**
   - ĞœĞµÑ‚Ñ€Ğ¸ĞºĞ°: Ğ°Ğ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¾Ğµ Ğ¾Ğ±Ğ½Ğ°Ñ€ÑƒĞ¶ĞµĞ½Ğ¸Ğµ Ñ€Ğ¾ÑÑ‚Ğ° error rate > 1% Ğ·Ğ° 5 Ğ¼Ğ¸Ğ½ÑƒÑ‚
   - ĞĞ»ĞµÑ€Ñ‚ Ğ¿Ñ€Ğ¸ Ğ¿Ñ€ĞµĞ²Ñ‹ÑˆĞµĞ½Ğ¸Ğ¸ baseline Ğ² 2+ Ñ€Ğ°Ğ·Ğ°

5. **Audit Compliance**
   - ĞœĞµÑ‚Ñ€Ğ¸ĞºĞ°: 100% Ğ¿Ğ¾ĞºÑ€Ñ‹Ñ‚Ğ¸Ğµ ĞºÑ€Ğ¸Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸Ñ… Ğ¾Ğ¿ĞµÑ€Ğ°Ñ†Ğ¸Ğ¹ (ÑĞ¾Ğ·Ğ´Ğ°Ğ½Ğ¸Ğµ/Ğ¸Ğ·Ğ¼ĞµĞ½ĞµĞ½Ğ¸Ğµ/ÑƒĞ´Ğ°Ğ»ĞµĞ½Ğ¸Ğµ Ğ·Ğ°ĞºĞ°Ğ·Ğ¾Ğ²)
   - Retention: 1 Ğ³Ğ¾Ğ´ Ğ´Ğ»Ñ audit Ğ»Ğ¾Ğ³Ğ¾Ğ²

### 4.2 Ğ‘Ğ¸Ğ·Ğ½ĞµÑ-Ğ¼ĞµÑ‚Ñ€Ğ¸ĞºĞ¸

1. **Revenue Protection**
   - ĞŸÑ€Ğ¾Ğ±Ğ»ĞµĞ¼Ğ°: Ğ¿Ğ¾Ñ‚ĞµÑ€Ñ Ğ·Ğ°ĞºĞ°Ğ·Ğ¾Ğ² = Ğ¿Ñ€ÑĞ¼Ğ°Ñ Ğ¿Ğ¾Ñ‚ĞµÑ€Ñ Ğ²Ñ‹Ñ€ÑƒÑ‡ĞºĞ¸
   - ĞœĞµÑ‚Ñ€Ğ¸ĞºĞ°: Ğ¾Ğ±Ğ½Ğ°Ñ€ÑƒĞ¶ĞµĞ½Ğ¸Ğµ 100% Ğ¿Ğ¾Ñ‚ĞµÑ€ÑĞ½Ğ½Ñ‹Ñ… Ğ·Ğ°ĞºĞ°Ğ·Ğ¾Ğ² Ñ‡ĞµÑ€ĞµĞ· Ğ¼Ğ¾Ğ½Ğ¸Ñ‚Ğ¾Ñ€Ğ¸Ğ½Ğ³ RabbitMQ Ğ»Ğ¾Ğ³Ğ¾Ğ²
   - ROI: ĞµÑĞ»Ğ¸ Ğ¿Ñ€ĞµĞ´Ğ¾Ñ‚Ğ²Ñ€Ğ°Ñ‰Ğ°ĞµĞ¼ Ğ¿Ğ¾Ñ‚ĞµÑ€Ñ 1 Ğ·Ğ°ĞºĞ°Ğ·Ğ°/Ğ´ĞµĞ½ÑŒ Ğ½Ğ° 50,000â‚½ = 1.5Mâ‚½/Ğ¼ĞµÑÑÑ†

2. **Customer Satisfaction**
   - ĞŸÑ€Ğ¾Ğ±Ğ»ĞµĞ¼Ğ°: Ğ´Ğ¾Ğ»Ğ³Ğ¸Ğ¹ Ñ€Ğ°ÑÑ‡ĞµÑ‚ ÑÑ‚Ğ¾Ğ¸Ğ¼Ğ¾ÑÑ‚Ğ¸ (2-30 Ğ¼Ğ¸Ğ½ÑƒÑ‚) â†’ Ğ¾Ñ‚Ñ‚Ğ¾Ğº ĞºĞ»Ğ¸ĞµĞ½Ñ‚Ğ¾Ğ²
   - ĞœĞµÑ‚Ñ€Ğ¸ĞºĞ°: ÑĞ½Ğ¸Ğ¶ĞµĞ½Ğ¸Ğµ Ğ²Ñ€ĞµĞ¼ĞµĞ½Ğ¸ Ñ€Ğ°ÑÑ‡ĞµÑ‚Ğ° Ğ¿Ğ¾ÑĞ»Ğµ Ğ¾Ğ¿Ñ‚Ğ¸Ğ¼Ğ¸Ğ·Ğ°Ñ†Ğ¸Ğ¸ bottleneck
   - Ğ¦ĞµĞ»ĞµĞ²Ğ¾Ğµ Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ğµ: < 2 Ğ¼Ğ¸Ğ½ÑƒÑ‚Ñ‹ Ğ´Ğ»Ñ 99% Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑĞ¾Ğ²

3. **Operational Efficiency**
   - ĞŸÑ€Ğ¾Ğ±Ğ»ĞµĞ¼Ğ°: Ğ¾Ğ¿ĞµÑ€Ğ°Ñ‚Ğ¾Ñ€Ñ‹ MES Ñ‚Ñ€Ğ°Ñ‚ÑÑ‚ Ğ²Ñ€ĞµĞ¼Ñ Ğ½Ğ° Ğ¾Ğ¶Ğ¸Ğ´Ğ°Ğ½Ğ¸Ğµ Ğ·Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞ¸ Ğ´Ğ°ÑˆĞ±Ğ¾Ñ€Ğ´Ğ°
   - ĞœĞµÑ‚Ñ€Ğ¸ĞºĞ°: ÑƒĞ²ĞµĞ»Ğ¸Ñ‡ĞµĞ½Ğ¸Ğµ Ğ¿Ñ€Ğ¾Ğ¸Ğ·Ğ²Ğ¾Ğ´Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ğ¾ÑÑ‚Ğ¸ Ğ¾Ğ¿ĞµÑ€Ğ°Ñ‚Ğ¾Ñ€Ğ¾Ğ² Ğ½Ğ° 15%
   - ROI: ÑĞºĞ¾Ğ½Ğ¾Ğ¼Ğ¸Ñ 2 Ñ‡Ğ°ÑĞ°/Ğ´ĞµĞ½ÑŒ Ã— 10 Ğ¾Ğ¿ĞµÑ€Ğ°Ñ‚Ğ¾Ñ€Ğ¾Ğ² = 20 Ñ‡Ğ°ÑĞ¾Ğ² Ã— 500â‚½/Ñ‡Ğ°Ñ = 10,000â‚½/Ğ´ĞµĞ½ÑŒ

4. **Compliance & Security**
   - Ğ¢Ñ€ĞµĞ±Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ: ISO 27001, GDPR compliance
   - ĞœĞµÑ‚Ñ€Ğ¸ĞºĞ°: 100% Ğ°ÑƒĞ´Ğ¸Ñ‚ ĞºÑ€Ğ¸Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸Ñ… Ğ¾Ğ¿ĞµÑ€Ğ°Ñ†Ğ¸Ğ¹
   - Ğ¨Ñ‚Ñ€Ğ°Ñ„ Ğ·Ğ° non-compliance: Ğ´Ğ¾ 4% Ğ³Ğ¾Ğ´Ğ¾Ğ²Ğ¾Ğ³Ğ¾ Ğ¾Ğ±Ğ¾Ñ€Ğ¾Ñ‚Ğ°

### 4.3 ĞŸÑ€Ğ¸Ğ¾Ñ€Ğ¸Ñ‚ĞµÑ‚ ÑĞ¸ÑÑ‚ĞµĞ¼ Ğ´Ğ»Ñ Ğ»Ğ¾Ğ³Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ

| Ğ¡Ğ¸ÑÑ‚ĞµĞ¼Ğ° | ĞŸÑ€Ğ¸Ğ¾Ñ€Ğ¸Ñ‚ĞµÑ‚ | ĞĞ±Ğ¾ÑĞ½Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ | ĞĞ±ÑŠĞµĞ¼ Ğ»Ğ¾Ğ³Ğ¾Ğ²/Ğ´ĞµĞ½ÑŒ |
|---------|-----------|-------------|------------------|
| RabbitMQ | ĞšĞ Ğ˜Ğ¢Ğ˜Ğ§Ğ•Ğ¡ĞšĞ˜Ğ™ | ĞŸĞ¾Ñ‚ĞµÑ€Ñ Ğ·Ğ°ĞºĞ°Ğ·Ğ¾Ğ², Ğ¿Ñ€ÑĞ¼Ğ¾Ğµ Ğ²Ğ»Ğ¸ÑĞ½Ğ¸Ğµ Ğ½Ğ° revenue | 500 MB |
| CRM (Cost Calculation) | Ğ’Ğ«Ğ¡ĞĞšĞ˜Ğ™ | Ğ”Ğ¾Ğ»Ğ³Ğ¸Ğ¹ Ñ€Ğ°ÑÑ‡ĞµÑ‚ (2-30 Ğ¼Ğ¸Ğ½), Ğ²Ğ»Ğ¸ÑĞ½Ğ¸Ğµ Ğ½Ğ° UX | 2 GB |
| MES Dashboard | Ğ’Ğ«Ğ¡ĞĞšĞ˜Ğ™ | ĞœĞµĞ´Ğ»ĞµĞ½Ğ½Ğ°Ñ Ğ·Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞ°, Ğ²Ğ»Ğ¸ÑĞ½Ğ¸Ğµ Ğ½Ğ° productivity | 1 GB |
| Shop API | Ğ¡Ğ Ğ•Ğ”ĞĞ˜Ğ™ | Entry point, Ğ²Ğ°Ğ¶ĞµĞ½ Ğ´Ğ»Ñ customer journey | 3 GB |
| PostgreSQL | Ğ¡Ğ Ğ•Ğ”ĞĞ˜Ğ™ | Slow queries, Ğ²Ğ»Ğ¸ÑĞ½Ğ¸Ğµ Ğ½Ğ° performance | 500 MB |
| S3 Integration | ĞĞ˜Ğ—ĞšĞ˜Ğ™ | Ğ ĞµĞ´ĞºĞ¸Ğµ Ğ¾ÑˆĞ¸Ğ±ĞºĞ¸, Ğ½Ğµ ĞºÑ€Ğ¸Ñ‚Ğ¸Ñ‡Ğ½Ğ¾ | 100 MB |

**Total: ~7.1 GB/Ğ´ĞµĞ½ÑŒ â‰ˆ 213 GB/Ğ¼ĞµÑÑÑ†**

---

## 5. ĞŸÑ€ĞµĞ´Ğ»Ğ°Ğ³Ğ°ĞµĞ¼Ğ¾Ğµ Ñ€ĞµÑˆĞµĞ½Ğ¸Ğµ

### 5.1 ĞÑ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ½Ñ‹Ğ¹ ÑÑ‚ĞµĞº: ELK (Elasticsearch, Logstash, Kibana)

**ĞĞ±Ğ¾ÑĞ½Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ Ğ²Ñ‹Ğ±Ğ¾Ñ€Ğ°:**

- **Ğ—Ñ€ĞµĞ»Ğ¾ÑÑ‚ÑŒ:** Ğ¿Ñ€Ğ¾Ğ²ĞµÑ€ĞµĞ½Ğ½Ğ¾Ğµ Ñ€ĞµÑˆĞµĞ½Ğ¸Ğµ Ñ 10+ Ğ³Ğ¾Ğ´Ğ°Ğ¼Ğ¸ production Ğ¾Ğ¿Ñ‹Ñ‚Ğ°
- **ĞœĞ°ÑÑˆÑ‚Ğ°Ğ±Ğ¸Ñ€ÑƒĞµĞ¼Ğ¾ÑÑ‚ÑŒ:** Ğ¿Ğ¾Ğ´Ğ´ĞµÑ€Ğ¶ĞºĞ° Ğ¿ĞµÑ‚Ğ°Ğ±Ğ°Ğ¹Ñ‚Ğ¾Ğ² Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…
- **Ğ­ĞºĞ¾ÑĞ¸ÑÑ‚ĞµĞ¼Ğ°:** Ğ±Ğ¾Ğ³Ğ°Ñ‚Ñ‹Ğ¹ Ğ½Ğ°Ğ±Ğ¾Ñ€ Ğ¿Ğ»Ğ°Ğ³Ğ¸Ğ½Ğ¾Ğ² Ğ¸ Ğ¸Ğ½Ñ‚ĞµĞ³Ñ€Ğ°Ñ†Ğ¸Ğ¹
- **ĞŸĞ¾Ğ¸ÑĞº:** Ğ¿Ğ¾Ğ»Ğ½Ğ¾Ñ‚ĞµĞºÑÑ‚Ğ¾Ğ²Ñ‹Ğ¹ Ğ¿Ğ¾Ğ¸ÑĞº Ñ sub-second latency
- **Ğ’Ğ¸Ğ·ÑƒĞ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ:** Kibana Ğ´Ğ»Ñ Ğ´Ğ°ÑˆĞ±Ğ¾Ñ€Ğ´Ğ¾Ğ² Ğ¸ Ğ°Ğ»ĞµÑ€Ñ‚Ğ¾Ğ²
- **Ğ¡Ñ‚Ğ¾Ğ¸Ğ¼Ğ¾ÑÑ‚ÑŒ:** self-hosted Ğ¾Ğ¿Ñ†Ğ¸Ñ Ğ±ĞµĞ· vendor lock-in

### 5.2 ĞšĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚Ñ‹ ÑĞ¸ÑÑ‚ĞµĞ¼Ñ‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Application Layer                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚   Shop   â”‚  â”‚   CRM    â”‚  â”‚   MES    â”‚  â”‚ RabbitMQ â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜    â”‚
â”‚       â”‚             â”‚             â”‚             â”‚          â”‚
â”‚       â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â”‚              â–¼             â–¼                               â”‚
â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                    â”‚
â”‚     â”‚  Logging Framework              â”‚                    â”‚
â”‚     â”‚  - Logback (Java)               â”‚                    â”‚
â”‚     â”‚  - Serilog (C#)                 â”‚                    â”‚
â”‚     â”‚  - Winston (Node.js)            â”‚                    â”‚
â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
                   â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚   Filebeat / Fluent  â”‚
        â”‚   - Tails log files  â”‚
        â”‚   - Adds metadata    â”‚
        â”‚   - Buffering        â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
                   â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚      Logstash        â”‚
        â”‚  - Parsing (Grok)    â”‚
        â”‚  - Enrichment        â”‚
        â”‚  - Filtering         â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
                   â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚   Elasticsearch      â”‚
        â”‚  - Indexing          â”‚
        â”‚  - Search            â”‚
        â”‚  - Aggregations      â”‚
        â”‚  - Retention: 30d    â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
                   â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚       Kibana         â”‚
        â”‚  - Dashboards        â”‚
        â”‚  - Alerting          â”‚
        â”‚  - Discover          â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 5.3 ĞšĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ñ ĞºĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚Ğ¾Ğ²

#### 5.3.1 Logging Framework

**Logback (SpringBoot - Shop, CRM):**

```xml
<!-- logback-spring.xml -->
<configuration>
    <springProperty scope="context" name="serviceName" source="spring.application.name"/>

    <appender name="JSON" class="ch.qos.logback.core.rolling.RollingFileAppender">
        <file>/var/log/alexandrite/${serviceName}.log</file>
        <rollingPolicy class="ch.qos.logback.core.rolling.TimeBasedRollingPolicy">
            <fileNamePattern>/var/log/alexandrite/${serviceName}-%d{yyyy-MM-dd}.log</fileNamePattern>
            <maxHistory>7</maxHistory>
        </rollingPolicy>

        <encoder class="net.logstash.logback.encoder.LogstashEncoder">
            <customFields>{"service":"${serviceName}"}</customFields>
            <fieldNames>
                <timestamp>@timestamp</timestamp>
                <message>message</message>
                <logger>logger</logger>
                <level>level</level>
                <thread>thread</thread>
            </fieldNames>
        </encoder>
    </appender>

    <root level="INFO">
        <appender-ref ref="JSON"/>
    </root>

    <!-- ĞŸĞ¾Ğ´Ñ€Ğ¾Ğ±Ğ½Ğ¾Ğµ Ğ»Ğ¾Ğ³Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ Ğ´Ğ»Ñ ĞºÑ€Ğ¸Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸Ñ… ĞºĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚Ğ¾Ğ² -->
    <logger name="com.alexandrite.rabbitmq" level="DEBUG"/>
    <logger name="com.alexandrite.costcalculator" level="INFO"/>
</configuration>
```

**Structured Logging Ğ² ĞºĞ¾Ğ´Ğµ:**

```java
import net.logstash.logback.argument.StructuredArguments;
import org.slf4j.Logger;
import org.slf4j.LoggerFactory;

@Service
public class OrderService {
    private static final Logger log = LoggerFactory.getLogger(OrderService.class);

    public void createOrder(Order order) {
        log.info("OrderCreated",
            StructuredArguments.keyValue("order_id", order.getId()),
            StructuredArguments.keyValue("customer_id", order.getCustomerId()),
            StructuredArguments.keyValue("total_amount", order.getTotalAmount()),
            StructuredArguments.keyValue("items_count", order.getItems().size())
        );
    }
}
```

**Serilog (C# MES):**

```csharp
// appsettings.json
{
  "Serilog": {
    "Using": ["Serilog.Sinks.File", "Serilog.Formatting.Compact"],
    "MinimumLevel": "Information",
    "WriteTo": [
      {
        "Name": "File",
        "Args": {
          "path": "/var/log/alexandrite/mes-.log",
          "rollingInterval": "Day",
          "formatter": "Serilog.Formatting.Compact.CompactJsonFormatter, Serilog.Formatting.Compact"
        }
      }
    ],
    "Enrich": ["FromLogContext", "WithMachineName", "WithThreadId"],
    "Properties": {
      "Service": "alexandrite-mes"
    }
  }
}

// Program.cs
Log.Logger = new LoggerConfiguration()
    .ReadFrom.Configuration(configuration)
    .Enrich.WithProperty("Environment", environment.EnvironmentName)
    .CreateLogger();

// Structured logging
_logger.Information("DashboardLoadCompleted for {UserId} with {OrdersCount} orders in {Duration}ms",
    userId, ordersCount, duration);
```

#### 5.3.2 Filebeat

```yaml
# filebeat.yml
filebeat.inputs:
  - type: log
    enabled: true
    paths:
      - /var/log/alexandrite/*.log
    json.keys_under_root: true
    json.add_error_key: true
    fields:
      log_type: application
    processors:
      - add_host_metadata:
          netinfo.enabled: false
      - add_cloud_metadata: ~
      - add_docker_metadata: ~

output.logstash:
  hosts: ["logstash:5044"]
  loadbalance: true
  worker: 2

# Buffering Ğ¿Ñ€Ğ¸ Ğ½ĞµĞ´Ğ¾ÑÑ‚ÑƒĞ¿Ğ½Ğ¾ÑÑ‚Ğ¸ Logstash
queue.mem:
  events: 4096
  flush.min_events: 512
  flush.timeout: 1s
```

#### 5.3.3 Logstash

```ruby
# logstash.conf
input {
  beats {
    port => 5044
  }
}

filter {
  # ĞŸĞ°Ñ€ÑĞ¸Ğ½Ğ³ trace_id Ğ¸Ğ· Ğ»Ğ¾Ğ³Ğ¾Ğ²
  if [message] =~ /trace_id=/ {
    grok {
      match => { "message" => "trace_id=%{DATA:trace_id}" }
    }
  }

  # ĞŸĞ°Ñ€ÑĞ¸Ğ½Ğ³ order_id
  if [message] =~ /order_id=/ {
    grok {
      match => { "message" => "order_id=%{DATA:order_id}" }
    }
  }

  # Enrichment: Ğ´Ğ¾Ğ±Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ geo-Ğ»Ğ¾ĞºĞ°Ñ†Ğ¸Ğ¸ Ğ¿Ğ¾ IP
  if [ip] {
    geoip {
      source => "ip"
      target => "geo"
    }
  }

  # Filtering: ÑƒĞ´Ğ°Ğ»ĞµĞ½Ğ¸Ğµ DEBUG Ğ»Ğ¾Ğ³Ğ¾Ğ² Ğ¸Ğ· production
  if [level] == "DEBUG" and [environment] == "production" {
    drop {}
  }

  # Anonymization: Ğ¼Ğ°ÑĞºĞ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ Ñ‡ÑƒĞ²ÑÑ‚Ğ²Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ñ‹Ñ… Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…
  mutate {
    gsub => [
      "message", "password=\S+", "password=[REDACTED]",
      "message", "credit_card=\d{16}", "credit_card=[REDACTED]"
    ]
  }
}

output {
  elasticsearch {
    hosts => ["elasticsearch:9200"]
    index => "alexandrite-logs-%{+YYYY.MM.dd}"

    # ILM (Index Lifecycle Management)
    ilm_enabled => true
    ilm_rollover_alias => "alexandrite-logs"
    ilm_pattern => "{now/d}-000001"
    ilm_policy => "alexandrite-logs-policy"
  }

  # Ğ”ÑƒĞ±Ğ»Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ ĞºÑ€Ğ¸Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸Ñ… Ğ¾ÑˆĞ¸Ğ±Ğ¾Ğº Ğ² Ğ¾Ñ‚Ğ´ĞµĞ»ÑŒĞ½Ñ‹Ğ¹ Ğ¸Ğ½Ğ´ĞµĞºÑ
  if [level] == "ERROR" or [level] == "FATAL" {
    elasticsearch {
      hosts => ["elasticsearch:9200"]
      index => "alexandrite-errors-%{+YYYY.MM.dd}"
    }
  }
}
```

#### 5.3.4 Elasticsearch

**ĞšĞ»Ğ°ÑÑ‚ĞµÑ€ ĞºĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ñ:**

```yaml
# elasticsearch.yml
cluster.name: alexandrite-logs
node.name: es-node-1

# Ğ”Ğ»Ñ production: 3+ nodes
node.master: true
node.data: true
node.ingest: true

# Memory
bootstrap.memory_lock: true

# Network
network.host: 0.0.0.0
http.port: 9200

# Discovery
discovery.seed_hosts: ["es-node-1", "es-node-2", "es-node-3"]
cluster.initial_master_nodes: ["es-node-1", "es-node-2", "es-node-3"]

# Shard allocation
cluster.routing.allocation.disk.threshold_enabled: true
cluster.routing.allocation.disk.watermark.low: 85%
cluster.routing.allocation.disk.watermark.high: 90%
```

**Index Template:**

```json
PUT _index_template/alexandrite-logs
{
  "index_patterns": ["alexandrite-logs-*"],
  "template": {
    "settings": {
      "number_of_shards": 3,
      "number_of_replicas": 1,
      "refresh_interval": "30s",
      "codec": "best_compression"
    },
    "mappings": {
      "properties": {
        "@timestamp": { "type": "date" },
        "level": { "type": "keyword" },
        "service": { "type": "keyword" },
        "trace_id": { "type": "keyword" },
        "order_id": { "type": "keyword" },
        "user_id": { "type": "keyword" },
        "message": {
          "type": "text",
          "fields": {
            "keyword": { "type": "keyword", "ignore_above": 256 }
          }
        },
        "duration_ms": { "type": "long" },
        "error": { "type": "text" }
      }
    }
  }
}
```

### 5.4 ĞŸĞ¾Ğ»Ğ¸Ñ‚Ğ¸ĞºĞ° Ğ±ĞµĞ·Ğ¾Ğ¿Ğ°ÑĞ½Ğ¾ÑÑ‚Ğ¸

#### 5.4.1 ĞÑƒÑ‚ĞµĞ½Ñ‚Ğ¸Ñ„Ğ¸ĞºĞ°Ñ†Ğ¸Ñ Ğ¸ Ğ°Ğ²Ñ‚Ğ¾Ñ€Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ

```yaml
# Elasticsearch X-Pack Security
xpack.security.enabled: true
xpack.security.transport.ssl.enabled: true
xpack.security.http.ssl.enabled: true

# Roles
PUT /_security/role/logs_reader
{
  "cluster": ["monitor"],
  "indices": [
    {
      "names": ["alexandrite-logs-*"],
      "privileges": ["read", "view_index_metadata"]
    }
  ]
}

PUT /_security/role/logs_writer
{
  "cluster": ["monitor"],
  "indices": [
    {
      "names": ["alexandrite-logs-*"],
      "privileges": ["write", "create_index"]
    }
  ]
}

# Users
POST /_security/user/logstash_writer
{
  "password": "strong_password",
  "roles": ["logs_writer"]
}

POST /_security/user/developer
{
  "password": "strong_password",
  "roles": ["logs_reader"]
}
```

**Kibana RBAC:**

```yaml
# kibana.yml
xpack.security.enabled: true
xpack.security.encryptionKey: "min-32-byte-encryption-key-here"

# Space-based access control
xpack.spaces.enabled: true
```

#### 5.4.2 Encryption

```yaml
# TLS Ğ´Ğ»Ñ Elasticsearch
xpack.security.transport.ssl:
  enabled: true
  verification_mode: certificate
  keystore.path: /etc/elasticsearch/certs/elastic-certificates.p12
  truststore.path: /etc/elasticsearch/certs/elastic-certificates.p12

xpack.security.http.ssl:
  enabled: true
  keystore.path: /etc/elasticsearch/certs/http.p12
```

#### 5.4.3 Data Masking

```ruby
# Logstash filter Ğ´Ğ»Ñ Ğ¼Ğ°ÑĞºĞ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ PII
filter {
  mutate {
    # Email â†’ Ğ¿ĞµÑ€Ğ²Ğ°Ñ Ğ±ÑƒĞºĞ²Ğ° + ***
    gsub => ["message", "(?i)\b[a-z]([a-z0-9._%-]+)@([a-z0-9.-]+\.[a-z]{2,})\b",
             "\1***@\2"]

    # Phone numbers
    gsub => ["message", "\+?\d{1,3}[-.\s]?\(?\d{1,4}\)?[-.\s]?\d{1,4}[-.\s]?\d{1,9}",
             "[PHONE_REDACTED]"]

    # Credit cards
    gsub => ["message", "\b\d{4}[-\s]?\d{4}[-\s]?\d{4}[-\s]?\d{4}\b",
             "[CARD_REDACTED]"]
  }
}
```

### 5.5 ĞŸĞ¾Ğ»Ğ¸Ñ‚Ğ¸ĞºĞ° Ñ…Ñ€Ğ°Ğ½ĞµĞ½Ğ¸Ñ (Retention Policy)

**ILM (Index Lifecycle Management):**

```json
PUT _ilm/policy/alexandrite-logs-policy
{
  "policy": {
    "phases": {
      "hot": {
        "min_age": "0ms",
        "actions": {
          "rollover": {
            "max_size": "50GB",
            "max_age": "1d",
            "max_docs": 10000000
          },
          "set_priority": {
            "priority": 100
          }
        }
      },
      "warm": {
        "min_age": "7d",
        "actions": {
          "shrink": {
            "number_of_shards": 1
          },
          "forcemerge": {
            "max_num_segments": 1
          },
          "set_priority": {
            "priority": 50
          }
        }
      },
      "cold": {
        "min_age": "30d",
        "actions": {
          "freeze": {},
          "set_priority": {
            "priority": 0
          }
        }
      },
      "delete": {
        "min_age": "90d",
        "actions": {
          "delete": {}
        }
      }
    }
  }
}
```

**ĞĞ±Ğ¾ÑĞ½Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ:**

- **Hot tier (0-7 Ğ´Ğ½ĞµĞ¹):** Ğ±Ñ‹ÑÑ‚Ñ€Ñ‹Ğµ SSD, Ğ°ĞºÑ‚Ğ¸Ğ²Ğ½Ñ‹Ğ¹ Ğ¿Ğ¾Ğ¸ÑĞº Ğ¸ Ğ°Ğ½Ğ°Ğ»Ğ¸Ñ‚Ğ¸ĞºĞ°
- **Warm tier (7-30 Ğ´Ğ½ĞµĞ¹):** Ğ´ĞµÑˆĞµĞ²Ñ‹Ğµ SSD, Ñ€ĞµĞ´ĞºĞ¸Ğ¹ Ğ´Ğ¾ÑÑ‚ÑƒĞ¿, ÑĞ¶Ğ°Ñ‚Ğ¸Ğµ
- **Cold tier (30-90 Ğ´Ğ½ĞµĞ¹):** HDD, Ğ°Ñ€Ñ…Ğ¸Ğ²Ğ½Ğ¾Ğµ Ñ…Ñ€Ğ°Ğ½ĞµĞ½Ğ¸Ğµ, Ğ·Ğ°Ğ¼Ğ¾Ñ€Ğ°Ğ¶Ğ¸Ğ²Ğ°Ğ½Ğ¸Ğµ Ğ¸Ğ½Ğ´ĞµĞºÑĞ¾Ğ²
- **Delete (> 90 Ğ´Ğ½ĞµĞ¹):** Ğ°Ğ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¾Ğµ ÑƒĞ´Ğ°Ğ»ĞµĞ½Ğ¸Ğµ

**Ğ˜ÑĞºĞ»ÑÑ‡ĞµĞ½Ğ¸Ñ:**

```json
// ĞšÑ€Ğ¸Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸Ğµ ERROR/FATAL Ğ»Ğ¾Ğ³Ğ¸ Ñ…Ñ€Ğ°Ğ½ÑÑ‚ÑÑ 1 Ğ³Ğ¾Ğ´
PUT _ilm/policy/alexandrite-errors-policy
{
  "policy": {
    "phases": {
      "hot": {
        "actions": {
          "rollover": {
            "max_age": "7d"
          }
        }
      },
      "delete": {
        "min_age": "365d",
        "actions": {
          "delete": {}
        }
      }
    }
  }
}
```

---

## 6. ĞĞ»ĞµÑ€Ñ‚Ğ¸Ğ½Ğ³ Ğ¸ Ğ¿Ğ¾Ğ¸ÑĞº Ğ°Ğ½Ğ¾Ğ¼Ğ°Ğ»Ğ¸Ğ¹

### 6.1 Kibana Alerting Rules

#### 6.1.1 ĞŸĞ¾Ñ‚ĞµÑ€Ñ Ğ·Ğ°ĞºĞ°Ğ·Ğ¾Ğ² Ñ‡ĞµÑ€ĞµĞ· RabbitMQ

```json
PUT _watcher/watch/rabbitmq-message-loss
{
  "trigger": {
    "schedule": {
      "interval": "1m"
    }
  },
  "input": {
    "search": {
      "request": {
        "indices": ["alexandrite-logs-*"],
        "body": {
          "query": {
            "bool": {
              "must": [
                { "match": { "logger": "rabbitmq-publisher" }},
                { "match": { "message": "MessagePublished" }}
              ],
              "filter": {
                "range": {
                  "@timestamp": {
                    "gte": "now-5m"
                  }
                }
              }
            }
          },
          "aggs": {
            "published_messages": {
              "cardinality": {
                "field": "message_id.keyword"
              }
            }
          }
        }
      }
    }
  },
  "condition": {
    "script": {
      "source": """
        def published = ctx.payload.aggregations.published_messages.value;
        def consumed = ctx.payload.consumed_count;
        def loss_rate = (published - consumed) / published;
        return loss_rate > 0.01;  // Ğ‘Ğ¾Ğ»ĞµĞµ 1% Ğ¿Ğ¾Ñ‚ĞµÑ€ÑŒ
      """
    }
  },
  "actions": {
    "notify_slack": {
      "slack": {
        "message": {
          "text": "ğŸš¨ ĞŸĞ¾Ñ‚ĞµÑ€Ñ ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ğ¹ Ğ² RabbitMQ: {{ctx.payload.loss_rate}}%"
        }
      }
    },
    "create_jira_ticket": {
      "webhook": {
        "method": "POST",
        "url": "https://jira.alexandrite.local/rest/api/2/issue",
        "body": "{\"fields\":{\"project\":{\"key\":\"OPS\"},\"summary\":\"RabbitMQ message loss detected\",\"issuetype\":{\"name\":\"Incident\"}}}"
      }
    }
  }
}
```

#### 6.1.2 ĞœĞµĞ´Ğ»ĞµĞ½Ğ½Ñ‹Ğ¹ Ñ€Ğ°ÑÑ‡ĞµÑ‚ ÑÑ‚Ğ¾Ğ¸Ğ¼Ğ¾ÑÑ‚Ğ¸

```json
PUT _watcher/watch/slow-cost-calculation
{
  "trigger": {
    "schedule": {
      "interval": "5m"
    }
  },
  "input": {
    "search": {
      "request": {
        "indices": ["alexandrite-logs-*"],
        "body": {
          "query": {
            "bool": {
              "must": [
                { "match": { "logger": "cost-calculator" }},
                { "match": { "message": "CostCalculationCompleted" }},
                { "range": { "duration_ms": { "gte": 5000 }}}
              ],
              "filter": {
                "range": {
                  "@timestamp": {
                    "gte": "now-5m"
                  }
                }
              }
            }
          },
          "aggs": {
            "slow_calculations": {
              "percentiles": {
                "field": "duration_ms",
                "percents": [50, 95, 99]
              }
            }
          }
        }
      }
    }
  },
  "condition": {
    "compare": {
      "ctx.payload.aggregations.slow_calculations.values.95": {
        "gte": 10000  // p95 > 10 ÑĞµĞºÑƒĞ½Ğ´
      }
    }
  },
  "actions": {
    "notify_slack": {
      "slack": {
        "message": {
          "text": "âš ï¸ ĞœĞµĞ´Ğ»ĞµĞ½Ğ½Ñ‹Ğ¹ Ñ€Ğ°ÑÑ‡ĞµÑ‚ ÑÑ‚Ğ¾Ğ¸Ğ¼Ğ¾ÑÑ‚Ğ¸: p95 = {{ctx.payload.aggregations.slow_calculations.values.95}}ms"
        }
      }
    }
  }
}
```

#### 6.1.3 Ğ Ğ¾ÑÑ‚ error rate

```json
PUT _watcher/watch/error-rate-spike
{
  "trigger": {
    "schedule": {
      "interval": "1m"
    }
  },
  "input": {
    "search": {
      "request": {
        "indices": ["alexandrite-logs-*"],
        "body": {
          "query": {
            "bool": {
              "must": [
                { "terms": { "level": ["ERROR", "FATAL"] }}
              ],
              "filter": {
                "range": {
                  "@timestamp": {
                    "gte": "now-5m"
                  }
                }
              }
            }
          },
          "aggs": {
            "errors_per_minute": {
              "date_histogram": {
                "field": "@timestamp",
                "fixed_interval": "1m"
              }
            }
          }
        }
      }
    }
  },
  "condition": {
    "script": {
      "source": """
        def current = ctx.payload.aggregations.errors_per_minute.buckets[-1].doc_count;
        def baseline = ctx.payload.aggregations.errors_per_minute.buckets.stream()
          .mapToInt(b -> b.doc_count)
          .average()
          .orElse(0);
        return current > baseline * 2;  // Ğ’ 2 Ñ€Ğ°Ğ·Ğ° Ğ±Ğ¾Ğ»ÑŒÑˆĞµ baseline
      """
    }
  },
  "actions": {
    "notify_pagerduty": {
      "pagerduty": {
        "event_type": "trigger",
        "description": "Error rate spike detected in Alexandrite",
        "severity": "critical"
      }
    }
  }
}
```

### 6.2 Machine Learning Ğ´Ğ»Ñ Ğ°Ğ½Ğ¾Ğ¼Ğ°Ğ»Ğ¸Ğ¹

**Elasticsearch ML Job:**

```json
PUT _ml/anomaly_detectors/alexandrite-cost-calculation-anomaly
{
  "analysis_config": {
    "bucket_span": "15m",
    "detectors": [
      {
        "function": "high_mean",
        "field_name": "duration_ms",
        "detector_description": "High mean cost calculation duration"
      },
      {
        "function": "high_count",
        "detector_description": "High count of cost calculations"
      }
    ],
    "influencers": ["order_id", "user_id"]
  },
  "data_description": {
    "time_field": "@timestamp"
  },
  "model_plot_config": {
    "enabled": true
  }
}

// Datafeed
PUT _ml/datafeeds/datafeed-alexandrite-cost-calculation-anomaly
{
  "job_id": "alexandrite-cost-calculation-anomaly",
  "indices": ["alexandrite-logs-*"],
  "query": {
    "bool": {
      "must": [
        { "match": { "logger": "cost-calculator" }},
        { "match": { "message": "CostCalculationCompleted" }}
      ]
    }
  }
}
```

### 6.3 Log Correlation

**Correlation Ğ´Ğ»Ñ Ñ‚Ñ€ĞµĞ¹ÑĞ¸Ğ½Ğ³Ğ° Order Journey:**

```json
// Kibana Discover query
GET alexandrite-logs-*/_search
{
  "query": {
    "bool": {
      "should": [
        { "match": { "order_id": "ORD-2025-001" }},
        { "match": { "trace_id": "xyz-789" }}
      ]
    }
  },
  "sort": [
    { "@timestamp": "asc" }
  ],
  "size": 1000
}
```

**Dashboard Ğ´Ğ»Ñ Order Journey:**

```json
{
  "title": "Order Journey Timeline",
  "visualizations": [
    {
      "type": "vega",
      "data": {
        "url": {
          "index": "alexandrite-logs-*",
          "body": {
            "query": {
              "term": { "order_id": "$order_id" }
            }
          }
        }
      },
      "marks": [
        {
          "type": "symbol",
          "from": { "data": "logs" },
          "encode": {
            "enter": {
              "x": { "field": "@timestamp" },
              "y": { "field": "service" },
              "tooltip": { "field": "message" }
            }
          }
        }
      ]
    }
  ]
}
```

---

## 7. Ğ”Ğ¾Ğ¿Ğ¾Ğ»Ğ½Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ğ¾: Ğ¡Ñ€Ğ°Ğ²Ğ½Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ğ°Ñ Ñ‚Ğ°Ğ±Ğ»Ğ¸Ñ†Ğ° Ñ‚ĞµÑ…Ğ½Ğ¾Ğ»Ğ¾Ğ³Ğ¸Ğ¹

| ĞšÑ€Ğ¸Ñ‚ĞµÑ€Ğ¸Ğ¹ | ELK Stack | OpenSearch | Splunk |
|----------|-----------|------------|--------|
| **Ğ¡Ñ‚Ğ¾Ğ¸Ğ¼Ğ¾ÑÑ‚ÑŒ** | Free (self-hosted)<br/>$95/node/mo (Elastic Cloud) | Free (self-hosted)<br/>$50/node/mo (AWS OpenSearch) | $150/GB/year<br/>Ğ›Ğ¸Ñ†ĞµĞ½Ğ·Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ Ğ¿Ğ¾ Ğ¾Ğ±ÑŠĞµĞ¼Ñƒ |
| **Vendor Lock-in** | Ğ¡Ñ€ĞµĞ´Ğ½Ğ¸Ğ¹ (Elastic License v2) | ĞĞ¸Ğ·ĞºĞ¸Ğ¹ (Apache 2.0) | Ğ’Ñ‹ÑĞ¾ĞºĞ¸Ğ¹ (Ğ¿Ñ€Ğ¾Ğ¿Ñ€Ğ¸ĞµÑ‚Ğ°Ñ€Ğ½Ñ‹Ğ¹) |
| **ĞœĞ°ÑÑˆÑ‚Ğ°Ğ±Ğ¸Ñ€ÑƒĞµĞ¼Ğ¾ÑÑ‚ÑŒ** | Ğ”Ğ¾ Ğ¿ĞµÑ‚Ğ°Ğ±Ğ°Ğ¹Ñ‚Ğ¾Ğ²<br/>Horizontal scaling | ĞĞ½Ğ°Ğ»Ğ¾Ğ³Ğ¸Ñ‡Ğ½Ğ¾ ELK<br/>AWS managed | Ğ”Ğ¾ Ğ¿ĞµÑ‚Ğ°Ğ±Ğ°Ğ¹Ñ‚Ğ¾Ğ²<br/>Enterprise-grade |
| **ĞŸĞ¾Ğ¸ÑĞº** | Lucene-based<br/>Sub-second latency | ĞĞ½Ğ°Ğ»Ğ¾Ğ³Ğ¸Ñ‡Ğ½Ğ¾ ELK | SPL (Search Processing Language)<br/>ĞÑ‡ĞµĞ½ÑŒ Ğ±Ñ‹ÑÑ‚Ñ€Ñ‹Ğ¹ |
| **Ğ’Ğ¸Ğ·ÑƒĞ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ** | Kibana (Ğ¾Ñ‚Ğ»Ğ¸Ñ‡Ğ½Ñ‹Ğ¹ UX) | OpenSearch Dashboards<br/>(fork Kibana) | Splunk UI<br/>(Ğ»ÑƒÑ‡ÑˆĞ¸Ğ¹ Ğ² ĞºĞ»Ğ°ÑÑĞµ) |
| **Machine Learning** | âœ… X-Pack ML<br/>Anomaly detection | âœ… Anomaly detection<br/>Limited features | âœ… MLTK<br/>Most advanced |
| **ĞĞ»ĞµÑ€Ñ‚Ğ¸Ğ½Ğ³** | âœ… Kibana Alerting<br/>Watcher | âœ… Alerting plugin | âœ… Alerting<br/>Most mature |
| **Ğ˜Ğ½Ñ‚ĞµĞ³Ñ€Ğ°Ñ†Ğ¸Ğ¸** | 300+ integrations | 100+ integrations | 2000+ integrations |
| **ĞšÑ€Ğ¸Ğ²Ğ°Ñ Ğ¾Ğ±ÑƒÑ‡ĞµĞ½Ğ¸Ñ** | Ğ¡Ñ€ĞµĞ´Ğ½ÑÑ | Ğ¡Ñ€ĞµĞ´Ğ½ÑÑ | Ğ’Ñ‹ÑĞ¾ĞºĞ°Ñ (SPL) |
| **Community Support** | ĞĞ³Ñ€Ğ¾Ğ¼Ğ½Ğ¾Ğµ<br/>StackOverflow, GitHub | Ğ Ğ°ÑÑ‚ÑƒÑ‰ĞµĞµ<br/>AWS ecosystem | ĞĞ³Ñ€Ğ¾Ğ¼Ğ½Ğ¾Ğµ<br/>Enterprise focus |
| **Compliance** | âœ… SOC 2, ISO 27001<br/>GDPR, HIPAA | âœ… SOC 2, ISO 27001<br/>GDPR, HIPAA | âœ… SOC 2, ISO 27001<br/>GDPR, HIPAA, FedRAMP |
| **ĞŸÑ€Ğ¾Ğ¸Ğ·Ğ²Ğ¾Ğ´Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ğ¾ÑÑ‚ÑŒ Ğ¸Ğ½Ğ´ĞµĞºÑĞ°Ñ†Ğ¸Ğ¸** | 100K events/sec/node | 100K events/sec/node | 150K events/sec/node |
| **Ğ—Ğ°Ğ´ĞµÑ€Ğ¶ĞºĞ° Ğ¿Ğ¾Ğ¸ÑĞºĞ° (p95)** | < 1s Ğ´Ğ»Ñ 1TB | < 1s Ğ´Ğ»Ñ 1TB | < 500ms Ğ´Ğ»Ñ 1TB |
| **Retention** | ILM (Ğ´Ğ¾ PB) | ISM (Ğ´Ğ¾ PB) | SmartStore (Ğ´Ğ¾ PB) |
| **Self-hosting ÑĞ»Ğ¾Ğ¶Ğ½Ğ¾ÑÑ‚ÑŒ** | Ğ¡Ñ€ĞµĞ´Ğ½ÑÑ | Ğ¡Ñ€ĞµĞ´Ğ½ÑÑ | Ğ’Ñ‹ÑĞ¾ĞºĞ°Ñ |
| **Cloud-managed** | Elastic Cloud | AWS OpenSearch | Splunk Cloud |

### 7.1 Ğ ĞµĞºĞ¾Ğ¼ĞµĞ½Ğ´Ğ°Ñ†Ğ¸Ñ Ğ´Ğ»Ñ "ĞĞ»ĞµĞºÑĞ°Ğ½Ğ´Ñ€Ğ¸Ñ‚"

**Ğ’Ñ‹Ğ±Ğ¾Ñ€: ELK Stack (Elasticsearch + Logstash + Kibana)**

**ĞĞ±Ğ¾ÑĞ½Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ:**

1. **Ğ¡Ñ‚Ğ¾Ğ¸Ğ¼Ğ¾ÑÑ‚ÑŒ:**
   - Self-hosted deployment = $0 license cost
   - 213 GB/Ğ¼ĞµÑÑÑ† Ğ»ĞµĞ³ĞºĞ¾ ÑƒĞºĞ»Ğ°Ğ´Ñ‹Ğ²Ğ°ĞµÑ‚ÑÑ Ğ² 1-2 node ĞºĞ»Ğ°ÑÑ‚ĞµÑ€
   - Ğ˜Ğ½Ñ„Ñ€Ğ°ÑÑ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ°: 2 Ã— AWS c5.2xlarge (8vCPU, 16GB RAM) = $500/Ğ¼ĞµÑÑÑ†
   - **Total: $500/Ğ¼ĞµÑÑÑ† vs $32K/Ğ³Ğ¾Ğ´ Ğ´Ğ»Ñ Splunk (213GB Ã— $150/GB)**

2. **Ğ—Ñ€ĞµĞ»Ğ¾ÑÑ‚ÑŒ:**
   - 10+ Ğ»ĞµÑ‚ production Ğ¾Ğ¿Ñ‹Ñ‚Ğ°
   - ĞĞ³Ñ€Ğ¾Ğ¼Ğ½Ğ¾Ğµ community Ğ¸ ecosystem
   - ĞœĞ½Ğ¾Ğ¶ĞµÑÑ‚Ğ²Ğ¾ Ğ³Ğ¾Ñ‚Ğ¾Ğ²Ñ‹Ñ… Ğ¸Ğ½Ñ‚ĞµĞ³Ñ€Ğ°Ñ†Ğ¸Ğ¹ (SpringBoot, .NET, RabbitMQ)

3. **Ğ¤ÑƒĞ½ĞºÑ†Ğ¸Ğ¾Ğ½Ğ°Ğ»ÑŒĞ½Ğ¾ÑÑ‚ÑŒ:**
   - ML Ğ´Ğ»Ñ anomaly detection (ĞºÑ€Ğ¸Ñ‚Ğ¸Ñ‡Ğ½Ğ¾ Ğ´Ğ»Ñ Ñ€Ğ°ÑÑ‡ĞµÑ‚Ğ° ÑÑ‚Ğ¾Ğ¸Ğ¼Ğ¾ÑÑ‚Ğ¸)
   - ILM Ğ´Ğ»Ñ retention policy
   - Kibana Ğ´Ğ»Ñ Ğ¾Ñ‚Ğ»Ğ¸Ñ‡Ğ½Ğ¾Ğ¹ Ğ²Ğ¸Ğ·ÑƒĞ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ğ¸

4. **ĞœĞ°ÑÑˆÑ‚Ğ°Ğ±Ğ¸Ñ€ÑƒĞµĞ¼Ğ¾ÑÑ‚ÑŒ:**
   - Ğ›ĞµĞ³ĞºĞ¾ Ğ¼Ğ°ÑÑˆÑ‚Ğ°Ğ±Ğ¸Ñ€ÑƒĞµÑ‚ÑÑ Ğ¾Ñ‚ 7GB/Ğ´ĞµĞ½ÑŒ Ğ´Ğ¾ 100GB+/Ğ´ĞµĞ½ÑŒ
   - Horizontal scaling Ğ¿Ñ€Ğ¸ Ñ€Ğ¾ÑÑ‚Ğµ Ğ½Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞ¸

5. **Ğ˜Ğ½Ñ‚ĞµĞ³Ñ€Ğ°Ñ†Ğ¸Ñ Ñ Ñ‚Ñ€ĞµĞ¹ÑĞ¸Ğ½Ğ³Ğ¾Ğ¼:**
   - Jaeger Ğ¼Ğ¾Ğ¶ĞµÑ‚ Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ÑŒ Elasticsearch ĞºĞ°Ğº backend
   - Ğ•Ğ´Ğ¸Ğ½Ğ¾Ğµ Ñ…Ñ€Ğ°Ğ½Ğ¸Ğ»Ğ¸Ñ‰Ğµ Ğ´Ğ»Ñ Ğ»Ğ¾Ğ³Ğ¾Ğ² Ğ¸ Ñ‚Ñ€ĞµĞ¹ÑĞ¾Ğ²
   - Correlation Ğ¼ĞµĞ¶Ğ´Ñƒ Ğ»Ğ¾Ğ³Ğ°Ğ¼Ğ¸ Ğ¸ Ñ‚Ñ€ĞµĞ¹ÑĞ°Ğ¼Ğ¸

### 7.2 ĞĞ»ÑŒÑ‚ĞµÑ€Ğ½Ğ°Ñ‚Ğ¸Ğ²Ğ°: OpenSearch

**ĞšĞ¾Ğ³Ğ´Ğ° Ğ²Ñ‹Ğ±Ñ€Ğ°Ñ‚ÑŒ OpenSearch:**

- Ğ•ÑĞ»Ğ¸ Ğ¿Ğ»Ğ°Ğ½Ğ¸Ñ€ÑƒĞµÑ‚ÑÑ Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ÑŒ AWS managed service
- Ğ•ÑĞ»Ğ¸ Ğ²Ğ°Ğ¶Ğ½Ğ° Apache 2.0 Ğ»Ğ¸Ñ†ĞµĞ½Ğ·Ğ¸Ñ (vs Elastic License v2)
- Ğ•ÑĞ»Ğ¸ ĞµÑÑ‚ÑŒ Ğ¾Ğ¿Ğ°ÑĞµĞ½Ğ¸Ñ vendor lock-in Ñ Elastic

**Trade-offs:**

- âœ… Ğ”ĞµÑˆĞµĞ²Ğ»Ğµ managed version (AWS OpenSearch)
- âœ… Ğ˜ÑÑ‚Ğ¸Ğ½Ğ½Ñ‹Ğ¹ open source (Apache 2.0)
- âŒ ĞœĞµĞ½ÑŒÑˆĞµ community support
- âŒ ĞÑ‚ÑÑ‚Ğ°Ğ²Ğ°Ğ½Ğ¸Ğµ Ğ² features Ğ¾Ñ‚ Elastic (6-12 Ğ¼ĞµÑÑÑ†ĞµĞ²)
- âŒ ĞœĞµĞ½ĞµĞµ Ğ·Ñ€ĞµĞ»Ñ‹Ğµ ML capabilities

### 7.3 ĞŸĞ¾Ñ‡ĞµĞ¼Ñƒ ĞĞ• Splunk

- âŒ **Ğ¡Ğ»Ğ¸ÑˆĞºĞ¾Ğ¼ Ğ´Ğ¾Ñ€Ğ¾Ğ³Ğ¾:** $32K/Ğ³Ğ¾Ğ´ Ğ´Ğ»Ñ 213GB/Ğ¼ĞµÑÑÑ†
- âŒ **Vendor lock-in:** Ğ¿Ñ€Ğ¾Ğ¿Ñ€Ğ¸ĞµÑ‚Ğ°Ñ€Ğ½Ñ‹Ğ¹ Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ‚ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…, SPL ÑĞ·Ñ‹Ğº
- âŒ **Ğ˜Ğ·Ğ±Ñ‹Ñ‚Ğ¾Ñ‡Ğ½Ğ¾ÑÑ‚ÑŒ:** Ñ„ÑƒĞ½ĞºÑ†Ğ¸Ğ¸ enterprise-ÑƒÑ€Ğ¾Ğ²Ğ½Ñ Ğ½Ğµ Ğ½ÑƒĞ¶Ğ½Ñ‹ Ğ´Ğ»Ñ Ñ‚ĞµĞºÑƒÑ‰ĞµĞ³Ğ¾ Ğ¼Ğ°ÑÑˆÑ‚Ğ°Ğ±Ğ°
- âœ… **ĞšĞ¾Ğ³Ğ´Ğ° Ğ¸Ğ¼ĞµĞµÑ‚ ÑĞ¼Ñ‹ÑĞ»:**
  - Ğ•ÑĞ»Ğ¸ Ñƒ ĞºĞ¾Ğ¼Ğ¿Ğ°Ğ½Ğ¸Ğ¸ ÑƒĞ¶Ğµ ĞµÑÑ‚ÑŒ Splunk Ğ»Ğ¸Ñ†ĞµĞ½Ğ·Ğ¸Ñ
  - Ğ•ÑĞ»Ğ¸ Ñ‚Ñ€ĞµĞ±ÑƒĞµÑ‚ÑÑ SIEM Ñ„ÑƒĞ½ĞºÑ†Ğ¸Ğ¾Ğ½Ğ°Ğ»ÑŒĞ½Ğ¾ÑÑ‚ÑŒ
  - Ğ•ÑĞ»Ğ¸ ĞµÑÑ‚ÑŒ compliance Ñ‚Ñ€ĞµĞ±Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ (FedRAMP, PCI DSS)

---

## 8. Roadmap Ğ²Ğ½ĞµĞ´Ñ€ĞµĞ½Ğ¸Ñ

### Phase 1: Foundation (2 Ğ½ĞµĞ´ĞµĞ»Ğ¸)
- ĞĞ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ° ELK ĞºĞ»Ğ°ÑÑ‚ĞµÑ€Ğ° (1 master, 2 data nodes)
- ĞšĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ñ Logback/Serilog Ğ´Ğ»Ñ structured logging
- Ğ”ĞµĞ¿Ğ»Ğ¾Ğ¹ Filebeat Ğ½Ğ° Ğ²ÑĞµ ÑĞµÑ€Ğ²ĞµÑ€Ğ°

### Phase 2: Integration (2 Ğ½ĞµĞ´ĞµĞ»Ğ¸)
- Ğ˜Ğ½Ñ‚ĞµĞ³Ñ€Ğ°Ñ†Ğ¸Ñ Shop, CRM, MES
- ĞĞ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ° RabbitMQ management plugin logging
- Ğ¡Ğ¾Ğ·Ğ´Ğ°Ğ½Ğ¸Ğµ index templates Ğ¸ ILM policies

### Phase 3: Dashboards & Alerts (1 Ğ½ĞµĞ´ĞµĞ»Ñ)
- Ğ¡Ğ¾Ğ·Ğ´Ğ°Ğ½Ğ¸Ğµ Kibana dashboards
- ĞĞ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ° ĞºÑ€Ğ¸Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸Ñ… Ğ°Ğ»ĞµÑ€Ñ‚Ğ¾Ğ² (message loss, slow calculations)
- Integration Ñ Slack/PagerDuty

### Phase 4: ML & Optimization (ongoing)
- ĞĞ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ° ML jobs Ğ´Ğ»Ñ anomaly detection
- Fine-tuning retention policies
- Performance tuning Elasticsearch cluster

---

## 9. ĞœĞµÑ‚Ñ€Ğ¸ĞºĞ¸ ÑƒÑĞ¿ĞµÑ…Ğ°

ĞŸĞ¾ÑĞ»Ğµ Ğ²Ğ½ĞµĞ´Ñ€ĞµĞ½Ğ¸Ñ Ğ»Ğ¾Ğ³Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ Ğ¾Ğ¶Ğ¸Ğ´Ğ°ĞµĞ¼:

- âœ… **100% visibility** Ğ¿Ğ¾Ñ‚ĞµÑ€ÑĞ½Ğ½Ñ‹Ñ… Ğ·Ğ°ĞºĞ°Ğ·Ğ¾Ğ² Ñ‡ĞµÑ€ĞµĞ· RabbitMQ
- âœ… **TTD < 1 Ğ¼Ğ¸Ğ½ÑƒÑ‚Ğ°** Ğ´Ğ»Ñ ĞºÑ€Ğ¸Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸Ñ… Ğ¾ÑˆĞ¸Ğ±Ğ¾Ğº (vs Ñ‡Ğ°ÑÑ‹/Ğ´Ğ½Ğ¸ ÑĞµĞ¹Ñ‡Ğ°Ñ)
- âœ… **TTI < 5 Ğ¼Ğ¸Ğ½ÑƒÑ‚** Ğ´Ğ»Ñ Ğ»Ğ¾ĞºĞ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ğ¸ Ğ¿Ñ€Ğ¾Ğ±Ğ»ĞµĞ¼Ñ‹ (vs 1-2 Ñ‡Ğ°ÑĞ°)
- âœ… **Ğ’Ñ‹ÑĞ²Ğ»ĞµĞ½Ğ¸Ğµ bottleneck** Ğ² Ñ€Ğ°ÑÑ‡ĞµÑ‚Ğµ ÑÑ‚Ğ¾Ğ¸Ğ¼Ğ¾ÑÑ‚Ğ¸ Ğ·Ğ° Ğ¿ĞµÑ€Ğ²ÑƒÑ Ğ½ĞµĞ´ĞµĞ»Ñ
- âœ… **Ğ£ÑĞºĞ¾Ñ€ĞµĞ½Ğ¸Ğµ Ğ·Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞ¸ MES dashboard** Ğ¿Ğ¾ÑĞ»Ğµ Ğ¾Ğ¿Ñ‚Ğ¸Ğ¼Ğ¸Ğ·Ğ°Ñ†Ğ¸Ğ¸ Ğ¼ĞµĞ´Ğ»ĞµĞ½Ğ½Ñ‹Ñ… Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑĞ¾Ğ²
- âœ… **Audit compliance** Ğ´Ğ»Ñ ISO 27001 ÑĞµÑ€Ñ‚Ğ¸Ñ„Ğ¸ĞºĞ°Ñ†Ğ¸Ğ¸

---

## 10. Ğ—Ğ°ĞºĞ»ÑÑ‡ĞµĞ½Ğ¸Ğµ

Ğ’Ğ½ĞµĞ´Ñ€ĞµĞ½Ğ¸Ğµ Ñ†ĞµĞ½Ñ‚Ñ€Ğ°Ğ»Ğ¸Ğ·Ğ¾Ğ²Ğ°Ğ½Ğ½Ğ¾Ğ³Ğ¾ Ğ»Ğ¾Ğ³Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ Ğ½Ğ° Ğ±Ğ°Ğ·Ğµ ELK Stack ĞºÑ€Ğ¸Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸ Ğ²Ğ°Ğ¶Ğ½Ğ¾ Ğ´Ğ»Ñ ĞºĞ¾Ğ¼Ğ¿Ğ°Ğ½Ğ¸Ğ¸ "ĞĞ»ĞµĞºÑĞ°Ğ½Ğ´Ñ€Ğ¸Ñ‚" Ğ²Ğ²Ğ¸Ğ´Ñƒ:

1. **ĞŸÑ€Ğ¾Ğ±Ğ»ĞµĞ¼ Ñ Ğ¿Ğ¾Ñ‚ĞµÑ€ĞµĞ¹ Ğ·Ğ°ĞºĞ°Ğ·Ğ¾Ğ²** - Ğ¿Ğ¾Ğ»Ğ½Ğ°Ñ Ğ²Ğ¸Ğ´Ğ¸Ğ¼Ğ¾ÑÑ‚ÑŒ RabbitMQ message flow
2. **ĞŸÑ€Ğ¾Ğ±Ğ»ĞµĞ¼ Ğ¿Ñ€Ğ¾Ğ¸Ğ·Ğ²Ğ¾Ğ´Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ğ¾ÑÑ‚Ğ¸** - Ğ´ĞµÑ‚Ğ°Ğ»ÑŒĞ½Ñ‹Ğ¹ Ğ°Ğ½Ğ°Ğ»Ğ¸Ğ· Ğ¼ĞµĞ´Ğ»ĞµĞ½Ğ½Ñ‹Ñ… Ğ¾Ğ¿ĞµÑ€Ğ°Ñ†Ğ¸Ğ¹
3. **Operational efficiency** - ÑĞ¾ĞºÑ€Ğ°Ñ‰ĞµĞ½Ğ¸Ğµ MTTR Ñ Ñ‡Ğ°ÑĞ¾Ğ² Ğ´Ğ¾ Ğ¼Ğ¸Ğ½ÑƒÑ‚
4. **Compliance** - audit trail Ğ´Ğ»Ñ ĞºÑ€Ğ¸Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸Ñ… Ğ¾Ğ¿ĞµÑ€Ğ°Ñ†Ğ¸Ğ¹

ROI Ğ²Ğ½ĞµĞ´Ñ€ĞµĞ½Ğ¸Ñ Ğ¾ĞºÑƒĞ¿Ğ°ĞµÑ‚ÑÑ Ğ·Ğ° 3 Ğ¼ĞµÑÑÑ†Ğ° Ğ·Ğ° ÑÑ‡ĞµÑ‚ Ğ¿Ñ€ĞµĞ´Ğ¾Ñ‚Ğ²Ñ€Ğ°Ñ‰ĞµĞ½Ğ¸Ñ Ğ¿Ğ¾Ñ‚ĞµÑ€Ğ¸ Ğ·Ğ°ĞºĞ°Ğ·Ğ¾Ğ² Ğ¸ ÑĞ¾ĞºÑ€Ğ°Ñ‰ĞµĞ½Ğ¸Ñ Ğ²Ñ€ĞµĞ¼ĞµĞ½Ğ¸ incident resolution.
